---
category: Blog
layout: post
title: Ubuntu系统中查找文件和字符命令介绍 
---

{{ page.title }}
================

<p class="meta">2013-9-4 王要佳</p>

在刚开始接触Ubuntu的时候，通常会遇到自己建立的文件不知道放在硬盘的什么地方，这就需要掌握一些搜索命令，快速找到我们想找的文件。下来我们以查找文件和查找字符两大类，对find、locate、which、grep四种命令进行介绍。

###一、查找文件
-----------------------------------------------------------

#####1、find命令

**首先是find的语法：**

    find [起始目录] 寻找条件 操作
    find PATH OPTION [-exec COMMAND { } \;]

**该命令中的寻找条件可以是一个用逻辑运算符not、and、or组成的复合条件,逻辑运算符and、or、not的含义为：**

and：逻辑与，在命令中用“-a”表示，是系统缺省的选项，表示只有当所给的条件都满足时，寻找条件才算满足。例如:

    find –name ’tmp’ –xtype c -user ’inin’

该命令寻找三个给定条件都满足的所有文件。

or：逻辑或，在命令中用“-o”表示。该运算符表示只要所给的条件中有一个满足时，寻找条件就算满足。例如:

    find –name ’tmp’ –o –name ’mina*’

该命令查询文件名为’tmp’或是匹配’mina*’的所有文件。

not：逻辑非，在命令中用“!”表示。该运算符表示查找不满足所给条件的文件。例如:

    find ! –name ’tmp’

该命令查询文件名不是’tmp’的所有文件。

需要说明的是：当使用很多的逻辑选项时，可以用括号把这些选项括起来。例如：

    find (–name ’tmp’ –xtype c -user ’inin’ )

**在option中，具体有参数：**

-name ’字串’ 查找文件名匹配所给字串的所有文件，字串内可用通配符 *、?、[ ]。

-lname ’字串’ 查找文件名匹配所给字串的所有符号链接文件，字串内可用通配符 *、?、[ ]。

-gid n 查找属于ID号为 n 的用户组的所有文件。

-uid n 查找属于ID号为 n 的用户的所有文件。

-group ’字串’ 查找属于用户组名为所给字串的所有的文件。

-user ’字串’ 查找属于用户名为所给字串的所有的文件。

-empty 查找大小为 0的目录或文件。

-path ’字串’ 查找路径名匹配所给字串的所有文件，字串内可用通配符*、?、[ ]。

**我们再看一下exec选项：**

-exec：对搜索的结构指令指定的shell命令。注意格式要正确："-exec 命令 {} \;"

在}和\之间一定要有空格才行;{}表示命令的参数即为所找到的文件;命令的末尾必须以“\;”结束。

例如：对root以及子目录查找不包括目录/root/bin的，greek用户的，文件类型为普通文件的，3天之前的名为test-find.c的文件进行删除操作，命令如下：

    find / -name "test-find.c" -type f -mtime +3 -user greek -prune /root/bin -exec rm {} \;

find命令指令实例：

    find . - name ‘main*’ - exec more {} \;

查找当前目录中所有以main开头的文件，并显示这些文件的内容。

    find . (- name a.out - o - name ‘*.o’)> - atime +7 - exec rm {} \;

删除当前目录下所有一周之内没有被访问过的a .out或*.o文件。

命令中的“.”表示当前目录，此时 find 将从当前目录开始，逐个在其子目录中查找满足后面指定条件的文件。

“-name a.out” 是指要查找名为a.out的文件;

“-name ‘*.o’” 是指要查找所有名字以 .o 结尾的文件。

这两个 -name 之间的 -o 表示逻辑或(or)，即查找名字为a.out或名字以 .o结尾的文件。

find命令在当前目录及其子目录下找到这佯的文件之后，再进行判断，看其最后访问时间是否在7天以前(条件 -atime +7)，若是，则对该文件执行命令rm(-exec rm {} \;)。

其中 {} 代表当前查到的符合条件的文件名，\;则是语法所要求的。

#####2、locate命令

**locate常用写法：**

    locate filename

locate命令其实是“find -name”的另一种写法，但是要比后者快得多，原因在于它不搜索具体目录，而是搜索一个数据库（/var/lib/locatedb），这个数据库中含有本地所有文件信息。Linux系统自动创建这个数据库，并且每天自动更新一次，所以使用locate命令查不到最新变动过的文件。为了避免这种情况，可以在使用locate之前，先使用'sudo updatedb'命令，手动更新数据库。
 
locate命令的使用实例：
 
    locate /etc/sh
 
搜索etc目录下所有以sh开头的文件。
 
    locate ~/m
 
搜索用户主目录下，所有以m开头的文件。
 
    locate -i ~/m
 
搜索用户主目录下，所有以m开头的文件，并且忽略大小写。 

#####3、which命令

**locate常用写法：**

    which executeable_name
 
查找可执行文件，根据可执行文件的文件名。例如:

    which apache2

返回/usr/sbin/apache2



     













